#=======================================================
#   Makefile generated by "makegen" for Borland C++ 5.5
#=======================================================

BCDIR = C:\Borland\BCC55

.AUTODEPEND

# Borland tools defines
IMPLIB    = $(BCDIR)\bin\Implib
ILINK32   = $(BCDIR)\bin\ILink32
TLIB      = $(BCDIR)\bin\TLib
BRC32     = $(BCDIR)\bin\Brc32
TASM32    = $(BCDIR)\bin\Tasm32
CC        = $(BCDIR)\bin\BCC32
BCLEAN    = $(BCDIR)\bin\Bclean

# Borland Default Directories
BCLIBDIRS = $(BCDIR)\lib;$(BCDIR)\lib\psdk
BCINCDIRS = $(BCDIR)\include

# Borland Libraries
BCC32RTLIB      = cw32
MULTITHREAD     = mt
DYN             = i
WINIMPORTLIB    = import32

# Startup object
DOS_STARTUP     = c0x32.obj
WIN_STARTUP     = c0w32.obj
DLL_STARTUP     = c0d32.obj

# Compiler Defines
BCC32RTLDEF     = -D_RTLDLL
NOT2000DEF      = -D_WINVER=0x0400 -D_WIN32_WINNT=0x0400

# File Extensions
BCTEMPS         = *.il? *.csm *.tds *.map *.rws *.@@@ *.td2 *.tr2 *.mps
EDITTEMPS       = *.bak *.org *.$$*

# Input/output directories
oDir    = .
Bin     = .
Src     = .
libDirs = -L$(EXTRALIBDIRS)$(BCLIBDIRS)
incDirs = -I$(EXTRAINCDIRS)$(BCINCDIRS)

# Startup Object File
STARTUP = $(DOS_STARTUP)

# Runtime Library
RTLIB = $(BCC32RTLIB).lib

EXTRALIBDIRS = 
EXTRAINCDIRS = 
libDirs = -L$(EXTRALIBDIRS)$(BCLIBDIRS)
incDirs = -I$(EXTRAINCDIRS)$(BCINCDIRS)

# Compiler flags
C_FLAGS = -q -P- -K $(NOT2000DEF) -v -k -y -Od -tC -w-lvc- -w-hid- -w-hch- -w-lin- -w-ofp- -w-pia- -w-aus- -w-obi- -w-obs- -w-pro- -w-rch- -w-use  
# Linker flags
L_FLAGS = -x -c -v -ap -Tpe -OS 

SRCS =\
	$(src)\Hemicube.cpp\
	$(src)\Loader.cpp\
	$(src)\Mesher.cpp\
	$(src)\ProgRef.cpp\
	$(src)\radiosity.cpp

OBJS =\
	$(oDir)\Hemicube.obj\
	$(oDir)\Loader.obj\
	$(oDir)\Mesher.obj\
	$(oDir)\ProgRef.obj\
	$(oDir)\radiosity.obj

TARGET = $(Bin)\radiosity.exe

# Targets -------------------------------------------

all: $(TARGET)

clean: 
	$(BCLEAN) -i

# Linking Dependencies-------------------------------

$(Bin)\radiosity.exe : $(OBJS)
	$(ILINK32) @&&|
	$(L_FLAGS) $(libDirs) +
	$(STARTUP) +
	$(oDir)\Hemicube.obj +
	$(oDir)\Loader.obj +
	$(oDir)\Mesher.obj +
	$(oDir)\ProgRef.obj +
	$(oDir)\radiosity.obj +
	,$<,, +
	util2561.lib expat.lib +
	$(WINIMPORTLIB).lib +
	$(RTLIB) +
|

# Compiling Dependencies-------------------------------

$(oDir)\Hemicube.obj : $(Src)\Hemicube.cpp
	$(CC) -c $(C_FLAGS) $(incDirs) -o$@ $(Src)\Hemicube.cpp

$(oDir)\Loader.obj : $(Src)\Loader.cpp
	$(CC) -c $(C_FLAGS) $(incDirs) -o$@ $(Src)\Loader.cpp

$(oDir)\Mesher.obj : $(Src)\Mesher.cpp
	$(CC) -c $(C_FLAGS) $(incDirs) -o$@ $(Src)\Mesher.cpp

$(oDir)\ProgRef.obj : $(Src)\ProgRef.cpp
	$(CC) -c $(C_FLAGS) $(incDirs) -o$@ $(Src)\ProgRef.cpp

$(oDir)\radiosity.obj : $(Src)\radiosity.cpp
	$(CC) -c $(C_FLAGS) $(incDirs) -o$@ $(Src)\radiosity.cpp

